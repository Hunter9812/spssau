## 文件上传

### 请求消息

```py
POST  /api/upload
```

### 请求参数

​	file: 上传的excel或csv文件

### 请求示例

```py
POST /api/upload
Content-Type: multipart/form-data
name : "file"
[文件数据]

```

### 响应示例

```py
HTTP/1.1 200 OK
Content-Type: application/json

成功：

{
    "ret":1,
    "name": "附件一红葡萄整理.xlsx",
    "headers": {
        "0": "列名1",
        "1": "列名2",
        ...
    }
}

失败：
{
    "ret":0,
    "msg":"不支持该文件类型"
}
{
    "ret":0,
    "msg":"未收到文件"
}
{
    "ret":0,
    "msg":"仅支持 POST 请求"
}

```



## 方差分析

### 单因素

单因素方差分析（One-wayAnova），是检验由单一因素影响的多组样本某因变量的均值是否有显著差异。

自变量有一个，因变量可以有多个



#### 请求消息

y不能一块执行 循环分别执行

```py
POST /api/app01/variance_analysis
```

#### 请求参数

```py
form-data
{
    "name":"附件一红葡萄整理.xlsx",  # 文件
    "xid":"0"      # 自变量id
    "yid":"3,4"   # 因变量id
    "anovaType":"1" # 1表示单因素方差
}
```

#### 响应消息

```py
HTTP/1.1 200 OK
Content-Type: application/json
```

#### 响应内容

```py
{
    "ret": "1",
    "result": {
        "data": {
            "样品2": {
                "df": {
                    "组别": 1.0,
                    "Residual": 18.0
                },
                "sum_sq": {
                    "组别": 198.44999999999752,
                    "Residual": 504.1
                },
                "mean_sq": {
                    "组别": 198.44999999999752,
                    "Residual": 28.005555555555556
                },
                "F": {
                    "组别": 7.086094028962418,
                    "Residual": NaN
                },
                "PR(>F)": {
                    "组别": 0.015881693839627214,
                    "Residual": NaN
                }
            },
            "样品3": {
                "df": {
                    "组别": 1.0,
                    "Residual": 18.0
                },
                "sum_sq": {
                    "组别": 168.19999999999848,
                    "Residual": 688.8
                },
                "mean_sq": {
                    "组别": 168.19999999999848,
                    "Residual": 38.266666666666666
                },
                "F": {
                    "组别": 4.395470383275222,
                    "Residual": NaN
                },
                "PR(>F)": {
                    "组别": 0.05043120941452281,
                    "Residual": NaN
                }
            }
        },
        "analyse": "方差分析研究X(定类)对于Y(定量)的差异，比如不同学历人群对满意度差异关系；</br>第一：分析X与Y之间是否呈现出显著性(<i>p</i>值小于0.05或0.01)；</br>第二：如果呈现出显著性；通过具体对比平均值大小，描述具体差异所在；</br>第三：如果没有呈现出显著性；说明X不同组别下，Y没有差异；</br>第四：对分析进行总结。",
        "autoAnalyse": "从上表可知，利用方差分析(全称为单因素方差分析)去研究组别对于样品2,样品3共2项的差异性,从上表可以看出：不同组别样本对于样品2均呈现出显著性(<i>p</i><0.05)，意味着不同组别样本对于样品2全部均有着显著性，均有着差异性.</br>从上表可以看出：不同组别样本对于样品3全部均不会表现出显著性(<i>p</i>>0.05)，意味着不同组别样本对于样品3全部均表现出一致性，并没有差异性</br>"
    }
}
```



### 双因素

其他同上

#### 请求参数

```py
form-data
{
    "name":"附件一红葡萄整理.xlsx",  # 文件
    "xid":"0,1"      # 自变量id只有两
    "yid":"3"   # 因变量id只有一个
    "anovaType":"2" # 2表示双因素方差
}
```

#### 响应内容

```py
{
    "ret": "1",
    "result": {
        "data": {
            "样品2": {
                "df": {
                    "红普酒号": 9.0,
                    "组别": 1.0,
                    "Residual": 9.0
                },
                "sum_sq": {
                    "红普酒号": 253.05000000000052,
                    "组别": 198.4499999999997,
                    "Residual": 251.04999999999998
                },
                "mean_sq": {
                    "红普酒号": 28.116666666666724,
                    "组别": 198.4499999999997,
                    "Residual": 27.894444444444442
                },
                "F": {
                    "红普酒号": 1.007966540529777,
                    "组别": 7.11431985660226,
                    "Residual": NaN
                },
                "PR(>F)": {
                    "红普酒号": 0.4953815379926674,
                    "组别": 0.02573740783276019,
                    "Residual": NaN
                }
            }
        },
        "analyse": "双因素方差分析用于研究2个定类数据X对于1个定量数据Y的差异关系，通常用于实验研究中。如果有可能干扰模型项，则放入协变量中。</br>第一：分别分析2个X是否呈现出显著性；如果呈现出显著性，说明X不同组别会对Y产生显著性差异，具体可以通过方差分析(单因素方差)进一步研究；</br>第二：如果二阶效应显著(且前提是存在一阶主效应)，可继续通过表格和图形研究二阶效应情况【二阶效应也称作交互效应,需要选中才会输出】；</br>第三：协变量为干扰项，通常不需要进行分析。",
        "autoAnalyse": "从上表可知，利用双因素方差分析去研究组别和红普酒号对于样品2的影响关系，从上表可以看出：组别没有呈现出显著性(<i>F</i>=1.007966540529777，<i>p</i>=0.4953815379926674>0.05) ，说明主效应不存在，组别不会对样品2产生差异关系。</br>红普酒号呈现出显著性(<i>F</i>=7.11431985660226，<i>p</i>=0.02573740783276019<0.05) ，说明主效应存在，红普酒号会对样品2产生差异关系。具体差异可通过方差分析(单因素)进行具体分析。</br>"
    }
}
```

### 多因素

其他同上

#### 请求参数

```py
form-data
{
    "name":"附件一红葡萄整理.xlsx",  # 文件
    "xid":"0,1,2"      # 自变量id有多个(至少三个)
    "yid":"3"   # 因变量id只有一个
    "anovaType":"3" # 1 2 以外的都是多因素
}
```

#### 响应内容

```py
{
    "ret": "1",
    "result": {
        "data": {
            "样品2": {
                "df": {
                    "红普酒号": 9.0,
                    "组别": 1.0,
                    "样品1": 1.0,
                    "Residual": 8.0
                },
                "sum_sq": {
                    "红普酒号": 253.05000000000084,
                    "组别": 198.4500000000003,
                    "样品1": 65.14683954619146,
                    "Residual": 185.9031604538086
                },
                "mean_sq": {
                    "红普酒号": 28.11666666666676,
                    "组别": 198.4500000000003,
                    "样品1": 65.14683954619146,
                    "Residual": 23.237895056726074
                },
                "F": {
                    "红普酒号": 1.2099489475286425,
                    "组别": 8.539930123428288,
                    "样品1": 2.803474212580846,
                    "Residual": NaN
                },
                "PR(>F)": {
                    "红普酒号": 0.3993865552529901,
                    "组别": 0.019222975607763097,
                    "样品1": 0.13259326575931704,
                    "Residual": NaN
                }
            }
        },
        "analyse": "多因素方差分析用于研究多个定类数据X对于1个定量数据Y的差异关系，通常用于实验研究中。如果有可能干扰模型项，则放入协变量中。</br>第一：分别分析多个X是否呈现出显著性；如果呈现出显著性，说明X不同组别会对Y产生显著性差异，具体可以通过方差分析(单因素方差)进一步研究；</br>第二：如果二阶效应显著(且前提是存在一阶主效应)，可继续通过表格和图形研究二阶效应情况；</br>第三：如果三阶效应显著(且前提是存在二阶效应)；可继续通过表格均值对比研究三阶效应情况；</br>第四：协变量为干扰项，通常不需要进行分析。",
        "autoAnalyse": "从上表可知，利用多因素方差分析去研究组别,红普酒号,样品1对于样品2的影响关系，从上表可以看出：组别没有呈现出显著性(<i>F</i>=1.2099489475286425，<i>p</i>=0.3993865552529901>0.05) ，说明组别并不会对样品2产生差异关系。</br>红普酒号呈现出显著性(<i>F</i>=8.539930123428288，<i>p</i>=0.019222975607763097<0.05) ，说明主效应存在，红普酒号会对样品2产生差异关系。具体差异可通过方差分析(单因素)进行具体分析。</br>样品1没有呈现出显著性(<i>F</i>=2.803474212580846，<i>p</i>=0.13259326575931704>0.05) ，说明样品1并不会对样品2产生差异关系。</br>"
    }
}
```

